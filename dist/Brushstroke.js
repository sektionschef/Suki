class Brushstroke extends Vehicle{constructor(t){super(t.origin,t.target,t.drawBuffer,!1),this.maxSpeed=getRandomFromInterval(t.maxSpeedMin,t.maxSpeedMax),this.minSpeed=t.minSpeed,this.maxForce=t.maxForce,this.slowRadius=t.slowRadius,this.finishedRadius=t.finishedRadius,this.targetBdist=getRandomFromList(t.targetBdistList),this.targetBDirection=getRandomFromList(t.targetBDirectionList),this.basicSizeMin=t.basicSizeMin,this.basicSizeMax=t.basicSizeMax,this.turningFactor=t.turningFactor,this.OVERLAY=t.OVERLAY,this.basicSize=this.basicSizeMax,this.origin=t.origin,this.finished=!1,this.DEBUG=t.DEBUG,this.desiredSpeed=0,this.sprite=t.sprite,this.switchTarget=!1,this.totalDistance=p5.Vector.sub(t.target,this.origin),this.targetBAngle=this.totalDistance.heading()+PI/2*this.targetBDirection,this.targetB=p5.Vector.add(t.target,p5.Vector.fromAngle(this.targetBAngle,this.targetBdist)),this.target=new Vehicle(t.target,this.targetB,t.drawBuffer,this.DEBUG),this.turningDistance=this.totalDistance.mag()*this.turningFactor}updateTarget(){this.target.update(),this.target.show(),this.target.applyForce(this.target.seek())}updateBrushstroke(){0==this.finished&&(this.update(),this.updateTarget(),this.distanceToTarget<this.turningDistance&&0==this.switchTarget&&(this.target.target=this.target.origin.copy(),this.switchTarget=!0),this.basicSize=Math.round(map(this.desiredSpeed,this.minSpeed,this.maxSpeed,this.sprite.width*this.basicSizeMax,this.sprite.width*this.basicSizeMin)),p5.Vector.dist(this.pos,this.target.pos)<this.finishedRadius&&(this.finished=!0))}showBrushstroke(){this.DEBUG&&(this.buffer.push(),this.buffer.translate(this.origin.x,this.origin.y),this.buffer.fill(color("orange")),this.buffer.noStroke(),this.buffer.circle(0,0,50),this.buffer.pop(),this.buffer.push(),this.buffer.translate(this.origin.x,this.origin.y),this.buffer.strokeWeight(5),this.buffer.stroke(color("orange")),this.buffer.noFill(),this.buffer.circle(0,0,2*this.slowRadius),this.buffer.pop()),this.buffer.push(),this.buffer.noStroke(),this.buffer.rotate(this.vel.heading()),this.buffer.imageMode(CENTER),this.OVERLAY&&this.buffer.blendMode(OVERLAY),this.buffer.image(this.sprite,this.pos.x,this.pos.y,0,this.basicSize),this.buffer.pop()}}