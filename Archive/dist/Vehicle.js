class Vehicle{constructor(i,t,s,e=!0){this.buffer=s,this.maxSpeed=getRandomFromInterval(15,30),this.minSpeed=2,this.maxForce=2,this.slowRadius=200,this.basicSize=75,this.DEBUG=e,this.origin=i,this.target=t,this.pos=this.origin.copy(),this.vel=p5.Vector.sub(this.target,this.origin),this.acc=createVector(0,0)}update(){this.vel.add(this.acc),this.vel.limit(this.maxSpeed),this.pos.add(this.vel),this.acc.set(0,0)}applyForce(i){this.acc.add(i)}seek(i=!1){let t;return t=i?p5.Vector.sub(this.target.pos,this.pos):p5.Vector.sub(this.target,this.pos),this.desiredSpeed=this.maxSpeed,this.distanceToOrigin=p5.Vector.sub(this.origin,this.pos).mag(),this.distanceToOrigin<this.slowRadius&&(this.desiredSpeed=map(this.distanceToOrigin,0,this.slowRadius,this.minSpeed,this.maxSpeed)),this.distanceToTarget=t.mag(),this.distanceToTarget<this.slowRadius&&(this.desiredSpeed=map(this.distanceToTarget,0,this.slowRadius,0,this.maxSpeed)),t.setMag(this.desiredSpeed),t.sub(this.vel),t.limit(this.maxForce),t}show(){this.DEBUG&&(this.buffer.push(),this.buffer.translate(this.origin.x,this.origin.y),this.buffer.fill(color("orange")),this.buffer.noStroke(),this.buffer.circle(0,0,50),this.buffer.pop(),this.buffer.push(),this.buffer.translate(this.origin.x,this.origin.y),this.buffer.strokeWeight(5),this.buffer.stroke(color("orange")),this.buffer.noFill(),this.buffer.circle(0,0,2*this.slowRadius),this.buffer.pop(),this.buffer.push(),this.buffer.translate(this.pos.x,this.pos.y),this.buffer.fill(color("blue")),this.buffer.noStroke(),this.buffer.rotate(this.vel.heading()),this.buffer.triangle(0,-this.basicSize/4,this.basicSize,0,0,this.basicSize/4),this.buffer.pop(),this.buffer.push(),this.buffer.translate(this.target.x,this.target.y),this.buffer.fill(color("green")),this.buffer.noStroke(),this.buffer.circle(0,0,50),this.buffer.pop(),this.buffer.push(),this.buffer.translate(this.target.x,this.target.y),this.buffer.strokeWeight(5),this.buffer.stroke(color("green")),this.buffer.noFill(),this.buffer.circle(0,0,2*this.slowRadius),this.buffer.pop())}}